name: documentum

networks:
  documentum-network:
    driver: macvlan
    ipam:
      config: 
        - subnet: 192.168.1.0/24
          ip_range: 192.168.1.224/28
          gateway: 192.168.1.1
      options:
        parent: enp2s0

volumes:
  postgres-data:
  documentum-data:
  documentum-secure:
  documentum-config:
  documentum-apptoken:

services:
  postgres:
    image: postgres:12-alpine
    hostname: postgres
    container_name: postgres
    env_file:
      - .env
    networks:
      documentum-network:
        ipv4_address: 192.168.1.225
    volumes:
      - postgres-data:/var/lib/postgresql
  documentum:
    image: 996472359368.dkr.ecr.us-east-1.amazonaws.com/dctm-cs:22.2
    hostname: documentum
    container_name: documentum
    env_file:
      - .env
    networks:
      documentum-network:
        ipv4_address: 192.168.1.226
    volumes:
      - documentum-data:/var/lib/documentum
      - documentum-secure:/opt/documentum/dba/secure
      - documentum-config:/opt/documentum/config
      - documentum-apptoken:/opt/docmentum/documentum_apptoken


